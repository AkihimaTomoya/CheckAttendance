<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Face Recognition — Maroon UI</title>
  <link rel="stylesheet" href="static/css/style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Face Recognition</h1>
      <div class="subrow">
        <span id="connectionStatus" class="pill warn">Đang khởi tạo…</span>
        <span class="badge">Threshold: <strong id="serverThreshold">—</strong></span>
        <span class="badge">Faces: <strong id="faceCount">0</strong></span>
      </div>
    </header>

    <!-- Always-on media area: video + overlay canvas -->
    <section id="mediaWrap">
      <video id="videoStream" autoplay muted playsinline></video>
      <canvas id="canvasOverlay"></canvas>
    </section>

    <div class="grid">
      <!-- Left column: Results + Status -->
      <section class="card">
        <div class="row" style="justify-content:space-between; margin-bottom:8px;">
          <div class="muted" id="status">Đang chờ camera…</div>
          <div class="row">
            <button id="stopBtn" title="Tắt camera">Tắt camera</button>
            <button id="reloadFacebankBtn" title="Tạo lại facebank">Reload Facebank</button>
          </div>
        </div>

        <div class="card" style="margin-top:10px;">
          <h3>Kết quả nhận diện</h3>
          <small class="muted">Tên có dấu gạch xanh khi qua ngưỡng; đỏ nếu chưa đạt.</small>
          <pre id="resultPre" style="margin-top:8px;">Chưa có dữ liệu</pre>
        </div>
      </section>

      <!-- Right column: Controls + Debug -->
      <section class="card">
        <h3>Điều khiển thời gian thực</h3>
        <div class="row" style="gap:14px; margin:10px 0;">
          <label>Threshold:&nbsp;
            <input id="thrRange" type="range" min="1.20" max="2.20" step="0.01" value="1.56" />
            <input id="thrNum" type="number" min="1.20" max="2.20" step="0.01" value="1.56" />
          </label>
          <button id="applyThrBtn">Áp dụng</button>
        </div>
        <div class="row" style="gap:18px; margin-bottom:12px;">
          <label class="row"><input id="ttaChk" type="checkbox" checked />&nbsp;TTA</label>
          <label class="row"><input id="top1Chk" type="checkbox" />&nbsp;Hiển thị Top‑1</label>
          <button id="refreshRuntimeBtn">Làm mới</button>
        </div>
        <pre id="runtimePre">No data</pre>

        <div class="card" style="margin-top:12px;">
          <h3>Server Debug</h3>
          <div class="row"><button id="refreshDebugBtn">Làm mới</button></div>
          <pre id="serverDebugPre" style="margin-top:8px;">No data</pre>
        </div>

        <div class="card" style="margin-top:12px;">
          <h3>Facebank Debug</h3>
          <div class="row"><button id="refreshFacebankBtn">Làm mới</button></div>
          <pre id="facebankDebugPre" style="margin-top:8px;">No data</pre>
        </div>
      </section>
    </div>
  </div>

  <script src="static/js/fastapi.js"></script>
</body>
</html>
